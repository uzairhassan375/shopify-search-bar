<form action="{{ routes.search_url }}" method="get" class="custom-search-bar-form">
  <div class="custom-search-bar">
    <div class="search-icon-left">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
    </div>
    <input 
      type="text" 
      id="search-input"
      name="q" 
      placeholder="Upload image to find product through AI" 
      value="{{ search.terms | escape }}"
      autocomplete="off"
    />
    <!-- search button removed per request -->
  </div>
</form>

<style>
.custom-search-bar-form {
  width: 100%;
  max-width: 700px;
  margin: 20px auto;
}

.custom-search-bar {
  display: flex;
  align-items: center;
  background: #f5f5f5;
  border-radius: 50px;
  padding: 12px 1px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  width: 100%;
  gap: 20px;
}

.search-icon-left {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  color: #142C73;
  margin-right: 12px;
  margin-left:12px
}

.search-icon-left svg {
  width: 20px;
  height: 20px;
}

.custom-search-bar input {
  flex: 1;
  border: none;
  outline: none;
  padding: 0;
  background: transparent;
  font-size: 16px;
  color: #1a237e;
  font-weight: 400;
}

.custom-search-bar input::placeholder {
  color: #999;
  font-size: 14px;
  font-weight: 400;
}

/* search button removed â€” styles intentionally deleted */
</style>

<script>
(function() {
  const searchForm = document.querySelector('.custom-search-bar-form');
  const searchInput = document.getElementById('search-input');

  // Handle form submission
  if (searchForm) {
    searchForm.addEventListener('submit', function(e) {
      const query = searchInput.value.trim();
      if (!query) {
        e.preventDefault();
        searchInput.focus();
      }
    });
  }

  // Handle Enter key
  if (searchInput) {
    searchInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        const query = searchInput.value.trim();
        if (query) {
          searchForm.submit();
        }
      }
    });
  }
})();
</script>
